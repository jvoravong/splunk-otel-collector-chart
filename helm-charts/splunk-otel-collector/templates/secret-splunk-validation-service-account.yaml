{{- if and (not .Values.secret.create) (.Values.secret.validateSecret) (.Values.serviceAccount.create) }}
# Service account that is used by validation. Only exists during pre-install or pre-upgrade phases.
{{- $hookAnnotations := dict "helm.sh/hook" "pre-install,pre-upgrade" "helm.sh/hook-weight" "-1" "helm.sh/hook-delete-policy" "before-hook-creation,hook-succeeded" }}
{{- $customValues := dict "nameSuffix" "-validate-secret" "extraAnnotations" $hookAnnotations }}
{{- $common := dict "context" . "values" $customValues }}
{{- include "splunk-otel-collector.serviceAccountTemplate" $common | nindent 0 }}
{{- end }}
